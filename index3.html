<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart College Predictor</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #1A3D64;
      padding-bottom: 100px;
    }
    header {
      background-color: #0C2B4E;
      color: white;
      text-align: center;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .logo {
      width: 100px;
    }
    .form-section {
      background: white;
      max-width: 700px;
      margin: 30px auto;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    .form-section label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    .form-section select,
    .form-section input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
      margin-top: 5px;
    }
    .form-section button {
      margin-top: 20px;
      width: 100%;
      padding: 14px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    .form-section button:hover {
      background-color: #0056b3;
    }
    #downloadBtn {
      margin-top: 10px;
      background-color: #28a745;
    }
    #downloadBtn:hover {
      background-color: #218838;
    }
    table {
      width: 100%;
      margin-top: 30px;
      border-collapse: collapse;
      font-size: 15px;
    }
    table th, table td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
    }
    footer {
      background-color: #1D546C;
      color: white;
      text-align: center;
      padding: 15px;
      position: fixed;
      bottom: 0;
      width: 100%;
    }
    @media (max-width: 768px) {
      .form-section {
        margin: 15px;
        padding: 20px;
      }
      table th, table td {
        font-size: 14px;
        padding: 8px;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="cet-logo.png" alt="CET Logo" class="logo">
    <h1>Smart College Predictor</h1>
  </header>

  <section class="form-section">
    <form id="searchForm">
      <label for="percentile">MHT-CET Percentile:</label>
      <input type="number" step="0.01" id="percentile" required>

      <label for="category">Category:</label>
      <select id="category" required>
        <option value="">-- Select --</option>
        <option value="GOPENS">Open</option>
        <option value="GOBCS">OBC</option>
        <option value="GSCS">SC</option>
        <option value="GVJS">VJ</option>
        <option value="GNT1S">NT1</option>
        <option value="GNT2S">NT2</option>
        <option value="GNT3S">NT3</option>
        <option value="EWS">EWS</option>
        <option value="TFWS">TFWS</option>
      </select>

      <label for="branch">Preferred Branch:</label>
      <select id="branch" required>
        <option value="">-- Select Branch --</option>
        <option value="computer">Computer Science</option>
        <option value="it">Information Technology</option>
        <option value="civil">Civil engineering</option>
        <option value="mechanical">Mechanical engineering</option>
        <option value="electronics">Electronics engineering</option>
        <option value="electrical">Electrical engineering</option>
        <option value="chemical">Chemical engineering</option>
        <option value="chemical">Electronics and telecommunication</option>
        <option value="aids">Artificial inteligence and Data Science</option>
      </select>

      <button type="submit">Search Eligible Colleges</button>
    </form>

    <!-- <button id="downloadBtn">Download College List (CSV)</button> -->

    <div id="resultArea">
      <table id="resultTable">
        <thead>
          <tr>
            <th>College Name</th>
            <th>Branch</th>
            <th>Category</th>
            <th>Cutoff Percentile</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <footer>
    <p>© Smart College Predictor | MHTCET Based Admission Help</p>
  </footer>

  </style>
</head>

  
     
</body>
</html>

  


  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
  let collegeData = [];
  let filteredResults = [];

  fetch('mhtcet_cutoff_cleaned.json')
    .then(res => res.json())
    .then(data => collegeData = data);

  document.getElementById('searchForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const percentile = parseFloat(document.getElementById('percentile').value);
    const category = document.getElementById('category').value.trim();
    const branch = document.getElementById('branch').value.trim().toLowerCase();

    filteredResults = collegeData.filter(item =>
      item.Category === category &&
      item["Branch Name"].toLowerCase().includes(branch) &&
      percentile >= item.Percentile
    ).sort((a, b) => b.Percentile - a.Percentile);

    const tableBody = document.querySelector("#resultTable tbody");
    tableBody.innerHTML = "";

    if (filteredResults.length === 0) {
      tableBody.innerHTML = '<tr><td colspan="4">No colleges found matching your criteria.</td></tr>';
    } else {
      filteredResults.forEach(row => {
        tableBody.innerHTML += `
          <tr>
            <td>${row["College Name"]}</td>
            <td>${row["Branch Name"]}</td>
            <td>${row["Category"]}</td>
            <td>${row["Percentile"]}</td>
          </tr>
        `;
      });
    }

    document.getElementById('payToDownloadBtn').style.display = 'block';
    document.getElementById('downloadBtn').style.display = 'none';
  });

  document.getElementById('payToDownloadBtn').addEventListener('click', function () {
    const options = {
      key: "Qjd8ZYMfrMHSwh", // Razorpay Key ID
      amount: 1000000, // amount in paise = ₹10
      currency: "INR",
      name: "Shree Ganesh Counselling Centre",
      description: "Download Eligible College List",
      handler: function (response) {
        alert("Payment Successful! Download will begin now.");
        document.getElementById('downloadBtn').click();
      },
      theme: {
        color: "#007bff"
      }
    };
    const rzp = new Razorpay(options);
    rzp.open();
  });

   document.getElementById('downloadBtn').addEventListener('click', function () {
    if (!filteredResults.length) {
      alert("Please search first to generate results.");
      return;
    }

    let csvContent = "College Name,Branch,Category,Cutoff Percentile\n" +
      filteredResults.map(row =>
        `"${row["College Name"]}","${row["Branch Name"]}","${row["Category"]}",${row["Percentile"]}`
      ).join("\n");

    const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.setAttribute("href", url);
    link.setAttribute("download", "college_list.csv");
    link.style.display = "none";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  });
  window.open("results.html", "_blank");

</script> 

<button id="payToDownloadBtn" style="display:none; background-color:#ff9800; color:white; padding:10px; border:none; border-radius:6px; margin-top:10px; cursor:pointer;">Pay ₹10 to Download</button>
<button id="downloadBtn" style="display:none; margin-top:10px; background-color:#28a745; color:white; padding:10px; border:none; border-radius:6px;">Download College List (CSV)</button> -->

 
  
</body>
</html>
